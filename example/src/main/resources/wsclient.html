<!DOCTYPE html>

<html>
<head>
    <title>Affinity JS Demo</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script type="text/javascript" src="affinity.js"></script>
    <script type="text/javascript">

        var address = "ws://" + window.location.host + window.location.pathname + window.location.search;
        var ws = AvroWebSocket(address, function(message) {
            if (message == null) {
                console.log("[doesn't exist]");
                document.getElementById("messages").innerHTML = null;
            } else {
                document.getElementById("messages").innerHTML =
                    message._name + "\n"
                    + message.ts + "\n\n"
                    + message;
            }

        })

    </script>

</head>
<body>

    <div>
        <input type="text" id="messageinput"/>
    </div>
    <div>
        <button type="button" onclick="ws.send(document.getElementById('messageinput').value);" >Send</button>
    </div>

    <textarea id="messages" style = "width: 90%; height: 350px;"></textarea>


</body>
</html>